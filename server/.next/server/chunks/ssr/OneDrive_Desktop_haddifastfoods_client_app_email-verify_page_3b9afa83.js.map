{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/usman/OneDrive/Desktop/haddifastfoods/client/app/email-verify/page.js"],"sourcesContent":["'use client';\r\nimport { useState, useContext, useRef } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport axios from 'axios';\r\nimport { AppContext } from '../context/AppContext';\r\nimport { showToast } from \"../components/CustomToaster\";\r\n\r\nexport default function ResetPassword() {\r\n\r\n  const { fetchAuth } = useContext(AppContext);\r\n\r\n  \r\n  // Handle OTP input focus\r\n  const handleInput = (e, index) => {\r\n    if (e.target.value.length > 0 && index < inputRefs.current.length - 1) {\r\n      inputRefs.current[index + 1].focus();\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e, index) => {\r\n    if (e.key === 'Backspace' && e.target.value === '' && index > 0) {\r\n      inputRefs.current[index - 1].focus();\r\n    }\r\n  };\r\n\r\n  const handlePaste = (e) => {\r\n    const paste = e.clipboardData.getData('text');\r\n    const pasteArray = paste.split('');\r\n    pasteArray.forEach((char, index) => {\r\n      if (inputRefs.current[index]) inputRefs.current[index].value = char;\r\n    });\r\n    if (inputRefs.current[5]) inputRefs.current[5].focus();\r\n  };\r\n\r\n\r\n  const router = useRouter();\r\n  const { backendUrl } = useContext(AppContext);\r\n\r\n  // shared states\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  const inputRefs = useRef([]);\r\n\r\n\r\n  const onSubmitHandler = async (e) => {\r\n    e.preventDefault();\r\n    setSubmitting(true);\r\n\r\n    const otp = inputRefs.current.map((input) => input.value).join('');\r\n\r\n    try {\r\n      const { data } = await axios.post(\r\n        `${backendUrl}/api/auth/verify-account`,\r\n        { otp },\r\n        { withCredentials: true }\r\n      );\r\n\r\n      if (data.success) {\r\n        showToast(\"success\", data.message);\r\n        await fetchAuth(); \r\n        router.push('/'); \r\n      } else {\r\n        showToast(\"error\", data.message);\r\n      }\r\n    } catch (err) {\r\n      showToast(\"error\", err.response?.data?.message || \"Something went wrong\");\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n\r\n  /* ---------------- TIMER ---------------- */\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center h-screen bg-gray overflow-hidden \" >\r\n\r\n      <div className={`flex flex-col md:flex-row w-full md:w-2/3 h-3/4 md:h-2/3 bg-neutral  rounded-3xl overflow-hidden`}>\r\n\r\n\r\n        <div className=\"flex flex-col items-center justify-center gap-4 w-full md:w-1/2 h-2/5 md:h-full bg-yellow rounded-b-[120px] md:rounded-l-none md:rounded-r-[120px] text-center\">\r\n\r\n          <i className=\"ri-lock-unlock-fill text-8xl\"></i>\r\n          <h1 className='text-xl font-bold'>Verify your email</h1>\r\n          <p className='w-2/3'>We have sent a 6-digit verification code to your email. Enter the verification code to continue.</p>\r\n        </div>\r\n\r\n        <div className=\"flex flex-col items-center justify-center gap-4 order-2 md:order-1 w-full md:w-1/2 h-3/5 md:h-full px-4 md:p-12\">\r\n\r\n          <form className='flex flex-col gap-3 rounded-2xl  p-8  w-sm text-center'\r\n            onSubmit={onSubmitHandler}\r\n          >\r\n            <h1 className='text-lg font-bold'>\r\n              Email Verify OTP\r\n            </h1>\r\n\r\n\r\n            <div className=\"flex justify-center gap-4\" onPaste={handlePaste}>\r\n              {Array(6)\r\n                .fill(0)\r\n                .map((_, index) => (\r\n                  <input\r\n                    key={index}\r\n                    type=\"text\"\r\n                    maxLength={1}\r\n                    required\r\n                    ref={(el) => (inputRefs.current[index] = el)}\r\n                    onInput={(e) => handleInput(e, index)}\r\n                    onKeyDown={(e) => handleKeyDown(e, index)}\r\n                    className=\"w-11 h-11 bg-transparent border-2 border-gray \r\n                      outline-none focus:border-yellow  rounded-md text-2xl \r\n                      text-center font-semibold transition-all\"\r\n                  />\r\n                ))}\r\n            </div>\r\n\r\n            <button disabled={submitting}\r\n              className=\"cursor-pointer w-full px-4 py-3 bg-red rounded-md font-bold uppercase flex items-center justify-center gap-2\" >\r\n              {submitting && <div className=\"w-6 h-6 border-t-2 border-t-blue-400 rounded-full animate-spin\"></div>}\r\n              {submitting ? \"Verifying...\" : \"Verify Email\"}\r\n            </button>\r\n          </form>\r\n\r\n\r\n\r\n\r\n        </div>\r\n\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}
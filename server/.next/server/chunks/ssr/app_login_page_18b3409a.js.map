{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/extra/haddifastfoods/client/app/login/page.js"],"sourcesContent":["'use client';\r\nimport { useState, useContext, useEffect, useRef } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport axios from 'axios';\r\nimport { AppContext } from '../context/AppContext';\r\nimport { showToast } from '../components/CustomToaster';\r\n\r\nexport default function AuthPage() {\r\n  const router = useRouter();\r\n  const { backendUrl, isLoggedIn, fetchAuth } = useContext(AppContext);\r\n\r\n  const [state, setState] = useState('Login');\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  const nameRef = useRef(null);\r\n  const passwordRef = useRef(null);\r\n  const emailRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      router.push('/');\r\n    }\r\n  }, [isLoggedIn, router]);\r\n\r\n  const onSubmitHandler = async (e) => {\r\n    e.preventDefault();\r\n    setSubmitting(true);\r\n\r\n    try {\r\n      let response;\r\n      let data;\r\n\r\n      if (state === 'Sign Up') {\r\n        response = await axios.post(\r\n          `${backendUrl}/api/auth/register`,\r\n          { name, email, password },\r\n          { withCredentials: true }\r\n        );\r\n        data = response.data;\r\n\r\n        showToast(data.success ? \"success\" : \"error\", data.message);\r\n\r\n        if (data.success) {\r\n          const otpRes = await axios.post(\r\n            `${backendUrl}/api/auth/send-verify-otp`,\r\n            { email },\r\n            { withCredentials: true }\r\n          );\r\n          showToast(otpRes.data.success ? \"success\" : \"error\", otpRes.data.message);\r\n\r\n          router.push('/email-verify');\r\n        }\r\n\r\n      } else {\r\n        response = await axios.post(\r\n          `${backendUrl}/api/auth/login`,\r\n          { email, password },\r\n          { withCredentials: true }\r\n        );\r\n        data = response.data;\r\n\r\n        showToast(data.success ? \"success\" : \"error\", data.message);\r\n\r\n        if (data.success) {\r\n          await fetchAuth();\r\n          router.push('/');\r\n        }\r\n      }\r\n\r\n    } catch (err) {\r\n      showToast(\"error\", err.response?.data?.message || err.message || \"Something went wrong\");\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"relative flex items-center justify-center h-screen bg-gray overflow-hidden \" >\r\n\r\n      <div className={`absolute flex flex-col md:flex-row w-full md:w-2/3 h-3/4 md:h-2/3 bg-neutral  rounded-3xl overflow-hidden`}>\r\n\r\n        <div className=\"flex flex-col items-center justify-center gap-4 w-full md:w-1/2 h-2/5 md:h-full bg-yellow rounded-b-[120px] md:rounded-l-none md:rounded-r-[120px] text-center\">\r\n\r\n          {state === 'Sign Up' ? (\r\n            <>\r\n              <h2 className=\"text-3xl font-bold\">Welcome Back!</h2>\r\n              <p>Already have an account?</p>\r\n              <button onClick={() => setState('Login')}\r\n                className=\"px-4 py-2 bg-red rounded-md font-bold uppercase flex items-center justify-center gap-2 cursor-pointer\" >Login</button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <h2 className=\"text-3xl font-bold\">Hello Welcome!</h2>\r\n              <p>Dont have an account?</p>\r\n              <button onClick={() => setState('Sign Up')}\r\n                className=\"px-4 py-2 bg-red rounded-md font-bold uppercase flex items-center justify-center gap-2 cursor-pointer\" >Sign Up</button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex flex-col items-center justify-center gap-4 order-2 md:order-1 w-full md:w-1/2 h-3/5 md:h-full px-4 md:p-12\">\r\n          <p className=\"text-4xl font-semibold\">{state === 'Sign Up' ? 'Create Account' : 'Login'}</p>\r\n\r\n          <form className='w-full flex flex-col gap-4' onSubmit={onSubmitHandler}>\r\n            {state === 'Sign Up' && (\r\n              <div className=\"relative p-2 bg-gray rounded-t-md\">\r\n                <input\r\n                  ref={nameRef}\r\n                  type=\"text\"\r\n                  className=\"pt-6 w-full bg-transparent outline-none peer\"\r\n                  value={name}\r\n                  onChange={(e) => setName(e.target.value)}\r\n                  required\r\n                  disabled={submitting}\r\n                />\r\n                <label\r\n                  onClick={() => nameRef.current.focus()}\r\n                  className={`absolute left-2 text-yellow text-lg uppercase cursor-text transition-all duration-300\r\n                    ${name ? \"top-1 text-sm\" : \"top-5 peer-focus:top-1 peer-focus:text-sm\"}`}>\r\n                  name*\r\n                </label>\r\n                <span className=\"absolute left-0 bottom-0 w-0 h-0.5 bg-red-500 peer-focus:w-full transition-all duration-300\" />\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"relative p-2 bg-gray rounded-t-md\">\r\n              <input\r\n                ref={emailRef}\r\n                type=\"email\"\r\n                className=\"pt-6 w-full bg-transparent outline-none peer\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                required\r\n                disabled={submitting}\r\n              />\r\n              <label\r\n                onClick={() => emailRef.current.focus()}\r\n                className={`absolute left-2 text-yellow text-lg uppercase cursor-text transition-all duration-300\r\n                    ${email ? \"top-1 text-sm\" : \"top-5 peer-focus:top-1 peer-focus:text-sm\"}`}>\r\n                email*\r\n              </label>\r\n              <span className=\"absolute left-0 bottom-0 w-0 h-0.5 bg-red peer-focus:w-full transition-all duration-300\" />\r\n            </div>\r\n\r\n            <div className=\"relative p-2 bg-gray rounded-t-md\">\r\n              <input\r\n                ref={passwordRef}\r\n                type=\"password\"\r\n                className=\"pt-6 w-full bg-transparent outline-none peer\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                required\r\n                disabled={submitting}\r\n              />\r\n              <label\r\n                onClick={() => passwordRef.current.focus()}\r\n                className={`absolute left-2 text-yellow text-lg uppercase cursor-text transition-all duration-300\r\n                    ${password ? \"top-1 text-sm\" : \"top-5 peer-focus:top-1 peer-focus:text-sm\"}`}>\r\n                password*\r\n              </label>\r\n              <span className=\"absolute left-0 bottom-0 w-0 h-0.5 bg-red peer-focus:w-full transition-all duration-300\" />\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={submitting}\r\n              className=\"w-full px-4 py-3 bg-red rounded-md font-bold uppercase flex items-center justify-center gap-2\"\r\n            >\r\n              {submitting && <div className=\"w-6 h-6 border-t-2 border-t-blue-400 rounded-full animate-spin\"></div>}\r\n              {submitting ? (state === 'Sign Up' ? 'Signing up...' : 'Logging in...') : state}\r\n            </button>\r\n\r\n            {state === 'Login' && (\r\n              <p className='text-center underline text-red-300'>\r\n                <Link href=\"/reset-password\">Forgot Password?</Link>\r\n              </p>\r\n            )}\r\n\r\n          </form>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AANA;;;;;;;;AAQe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAA,mNAAU,EAAC,0IAAU;IAEnE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,MAAM,UAAU,IAAA,+MAAM,EAAC;IACvB,MAAM,cAAc,IAAA,+MAAM,EAAC;IAC3B,MAAM,WAAW,IAAA,+MAAM,EAAC;IAExB,IAAA,kNAAS,EAAC;QACR,IAAI,YAAY;YACd,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAY;KAAO;IAEvB,MAAM,kBAAkB,OAAO;QAC7B,EAAE,cAAc;QAChB,cAAc;QAEd,IAAI;YACF,IAAI;YACJ,IAAI;YAEJ,IAAI,UAAU,WAAW;gBACvB,WAAW,MAAM,gJAAK,CAAC,IAAI,CACzB,GAAG,WAAW,kBAAkB,CAAC,EACjC;oBAAE;oBAAM;oBAAO;gBAAS,GACxB;oBAAE,iBAAiB;gBAAK;gBAE1B,OAAO,SAAS,IAAI;gBAEpB,IAAA,+IAAS,EAAC,KAAK,OAAO,GAAG,YAAY,SAAS,KAAK,OAAO;gBAE1D,IAAI,KAAK,OAAO,EAAE;oBAChB,MAAM,SAAS,MAAM,gJAAK,CAAC,IAAI,CAC7B,GAAG,WAAW,yBAAyB,CAAC,EACxC;wBAAE;oBAAM,GACR;wBAAE,iBAAiB;oBAAK;oBAE1B,IAAA,+IAAS,EAAC,OAAO,IAAI,CAAC,OAAO,GAAG,YAAY,SAAS,OAAO,IAAI,CAAC,OAAO;oBAExE,OAAO,IAAI,CAAC;gBACd;YAEF,OAAO;gBACL,WAAW,MAAM,gJAAK,CAAC,IAAI,CACzB,GAAG,WAAW,eAAe,CAAC,EAC9B;oBAAE;oBAAO;gBAAS,GAClB;oBAAE,iBAAiB;gBAAK;gBAE1B,OAAO,SAAS,IAAI;gBAEpB,IAAA,+IAAS,EAAC,KAAK,OAAO,GAAG,YAAY,SAAS,KAAK,OAAO;gBAE1D,IAAI,KAAK,OAAO,EAAE;oBAChB,MAAM;oBACN,OAAO,IAAI,CAAC;gBACd;YACF;QAEF,EAAE,OAAO,KAAK;YACZ,IAAA,+IAAS,EAAC,SAAS,IAAI,QAAQ,EAAE,MAAM,WAAW,IAAI,OAAO,IAAI;QACnE,SAAU;YACR,cAAc;QAChB;IACF;IAGA,qBACE,8OAAC;QAAI,WAAU;kBAEb,cAAA,8OAAC;YAAI,WAAW,CAAC,yGAAyG,CAAC;;8BAEzH,8OAAC;oBAAI,WAAU;8BAEZ,UAAU,0BACT;;0CACE,8OAAC;gCAAG,WAAU;0CAAqB;;;;;;0CACnC,8OAAC;0CAAE;;;;;;0CACH,8OAAC;gCAAO,SAAS,IAAM,SAAS;gCAC9B,WAAU;0CAAyG;;;;;;;qDAGvH;;0CACE,8OAAC;gCAAG,WAAU;0CAAqB;;;;;;0CACnC,8OAAC;0CAAE;;;;;;0CACH,8OAAC;gCAAO,SAAS,IAAM,SAAS;gCAC9B,WAAU;0CAAyG;;;;;;;;;;;;;8BAK3H,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCAA0B,UAAU,YAAY,mBAAmB;;;;;;sCAEhF,8OAAC;4BAAK,WAAU;4BAA6B,UAAU;;gCACpD,UAAU,2BACT,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,KAAK;4CACL,MAAK;4CACL,WAAU;4CACV,OAAO;4CACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;4CACvC,QAAQ;4CACR,UAAU;;;;;;sDAEZ,8OAAC;4CACC,SAAS,IAAM,QAAQ,OAAO,CAAC,KAAK;4CACpC,WAAW,CAAC;oBACV,EAAE,OAAO,kBAAkB,6CAA6C;sDAAE;;;;;;sDAG9E,8OAAC;4CAAK,WAAU;;;;;;;;;;;;8CAIpB,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,KAAK;4CACL,MAAK;4CACL,WAAU;4CACV,OAAO;4CACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4CACxC,QAAQ;4CACR,UAAU;;;;;;sDAEZ,8OAAC;4CACC,SAAS,IAAM,SAAS,OAAO,CAAC,KAAK;4CACrC,WAAW,CAAC;oBACR,EAAE,QAAQ,kBAAkB,6CAA6C;sDAAE;;;;;;sDAGjF,8OAAC;4CAAK,WAAU;;;;;;;;;;;;8CAGlB,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,KAAK;4CACL,MAAK;4CACL,WAAU;4CACV,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4CAC3C,QAAQ;4CACR,UAAU;;;;;;sDAEZ,8OAAC;4CACC,SAAS,IAAM,YAAY,OAAO,CAAC,KAAK;4CACxC,WAAW,CAAC;oBACR,EAAE,WAAW,kBAAkB,6CAA6C;sDAAE;;;;;;sDAGpF,8OAAC;4CAAK,WAAU;;;;;;;;;;;;8CAGlB,8OAAC;oCACC,MAAK;oCACL,UAAU;oCACV,WAAU;;wCAET,4BAAc,8OAAC;4CAAI,WAAU;;;;;;wCAC7B,aAAc,UAAU,YAAY,kBAAkB,kBAAmB;;;;;;;gCAG3E,UAAU,yBACT,8OAAC;oCAAE,WAAU;8CACX,cAAA,8OAAC,uKAAI;wCAAC,MAAK;kDAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAU7C","debugId":null}}]
}